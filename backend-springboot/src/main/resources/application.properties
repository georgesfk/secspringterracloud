# Secure Platform Backend Configuration
# Spring Boot + Spring Security + JWT + DevSecOps

# Application Configuration
spring.application.name=secure-platform-backend
server.port=8080
server.servlet.context-path=/

# Database Configuration (H2 for development, PostgreSQL for production)
spring.datasource.url=jdbc:h2:mem:secureplatform;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# JWT Configuration
app.jwt.secret=MySecretKeyForJWTTokenGeneration123456789012345678901234567890
app.jwt.expiration=86400000 # 24 hours in milliseconds
app.jwt.refresh-expiration=604800000 # 7 days in milliseconds

# Security Configuration
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${JWK_SET_URI:}
spring.security.oauth2.resourceserver.jwt.issuer-uri=${ISSUER_URI:}

# Actuator Configuration (Secure)
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.info.env.enabled=true

# Logging Configuration
logging.level.com.secureplatform=DEBUG
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.file.name=logs/secure-platform.log

# CORS Configuration (configured in SecurityConfig.java)
# Frontend URL for CORS
frontend.url=http://localhost:4200

# Rate Limiting Configuration
rate.limit.enabled=true
rate.limit.requests.per.minute=100
rate.limit.requests.per.hour=1000

# OWASP ZAP Integration
owasp.zap.enabled=true
owasp.zap.api.key=${ZAP_API_KEY:}
owasp.zap.target.url=http://localhost:4200

# DevSecOps Configuration
devsecops.scan.enabled=true
devsecops.report.format=json
devsecops.output.directory=security-reports/

# File Upload Security
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Email Configuration (for notifications)
spring.mail.host=${SMTP_HOST:localhost}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:}
spring.mail.password=${SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Security Headers
security.headers.enabled=true
security.headers.content-security-policy=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'
security.headers.x-frame-options=DENY
security.headers.x-content-type-options=nosniff
security.headers.x-xss-protection=1; mode=block

# Profile-specific Configuration
spring.profiles.active=${SPRING_PROFILES_ACTIVE:development}
